package types

import (
	"context"
)

// MsgServer defines the support module's message service interface.
// This minimal interface supports external ticket reference management.
// Full ticket lifecycle is handled by Waldur/Jira.
type MsgServer interface {
	// CreateSupportRequest creates a new support request
	CreateSupportRequest(context.Context, *MsgCreateSupportRequest) (*MsgCreateSupportRequestResponse, error)
	// UpdateSupportRequest updates a support request
	UpdateSupportRequest(context.Context, *MsgUpdateSupportRequest) (*MsgUpdateSupportRequestResponse, error)
	// AddSupportResponse adds a response to a support request
	AddSupportResponse(context.Context, *MsgAddSupportResponse) (*MsgAddSupportResponseResponse, error)
	// ArchiveSupportRequest archives a support request
	ArchiveSupportRequest(context.Context, *MsgArchiveSupportRequest) (*MsgArchiveSupportRequestResponse, error)
	// RegisterExternalTicket registers an external ticket reference
	RegisterExternalTicket(context.Context, *MsgRegisterExternalTicket) (*MsgRegisterExternalTicketResponse, error)
	// UpdateExternalTicket updates an external ticket reference
	UpdateExternalTicket(context.Context, *MsgUpdateExternalTicket) (*MsgUpdateExternalTicketResponse, error)
	// RemoveExternalTicket removes an external ticket reference
	RemoveExternalTicket(context.Context, *MsgRemoveExternalTicket) (*MsgRemoveExternalTicketResponse, error)
	// UpdateParams updates module parameters (governance)
	UpdateParams(context.Context, *MsgUpdateParams) (*MsgUpdateParamsResponse, error)
}

// QueryServer defines the support module's query service interface.
// Queries are minimal - just retrieve external refs and params.
type QueryServer interface {
	// SupportRequest returns a support request by ID
	SupportRequest(context.Context, *QuerySupportRequestRequest) (*QuerySupportRequestResponse, error)
	// SupportRequestsBySubmitter returns support requests by submitter
	SupportRequestsBySubmitter(context.Context, *QuerySupportRequestsBySubmitterRequest) (*QuerySupportRequestsBySubmitterResponse, error)
	// SupportResponsesByRequest returns responses for a request
	SupportResponsesByRequest(context.Context, *QuerySupportResponsesByRequestRequest) (*QuerySupportResponsesByRequestResponse, error)
	// SupportRetentionStatus returns retention status for a request
	SupportRetentionStatus(context.Context, *QuerySupportRetentionStatusRequest) (*QuerySupportRetentionStatusResponse, error)
	// SupportAuditTrail returns audit trail for a request
	SupportAuditTrail(context.Context, *QuerySupportAuditTrailRequest) (*QuerySupportAuditTrailResponse, error)
	// ExternalRef returns a single external ticket reference
	ExternalRef(context.Context, *QueryExternalRefRequest) (*QueryExternalRefResponse, error)
	// ExternalRefsByOwner returns all external refs for a given owner
	ExternalRefsByOwner(context.Context, *QueryExternalRefsByOwnerRequest) (*QueryExternalRefsByOwnerResponse, error)
	// Params returns the module parameters
	Params(context.Context, *QueryParamsRequest) (*QueryParamsResponse, error)
}

// RegisterMsgServer registers MsgServer with the grpc.Server
// This is a stub that would be generated by protobuf in a full implementation
func RegisterMsgServer(s interface{}, srv MsgServer) {
	// In a real implementation, this would be generated by protoc-gen-go-grpc
	// For now, it serves as a type marker for module registration
}

// RegisterQueryServer registers QueryServer with the grpc.Server
// This is a stub that would be generated by protobuf in a full implementation
func RegisterQueryServer(s interface{}, srv QueryServer) {
	// In a real implementation, this would be generated by protoc-gen-go-grpc
	// For now, it serves as a type marker for module registration
}
