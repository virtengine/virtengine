{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Agent lifecycle hooks for VirtEngine codex-monitor. Compatible with VS Code, Claude Code, and Copilot CLI hook format.",
  "hooks": {
    "SessionStart": [
      {
        "id": "session-start-log",
        "command": "echo \"[hook] Agent session started: task=${VE_TASK_ID} sdk=${VE_SDK} branch=${VE_BRANCH_NAME}\"",
        "description": "Log agent session start for audit trail",
        "blocking": false,
        "sdks": ["*"],
        "timeout": 10000
      }
    ],
    "SessionStop": [
      {
        "id": "session-stop-log",
        "command": "echo \"[hook] Agent session ended: task=${VE_TASK_ID} sdk=${VE_SDK}\"",
        "description": "Log agent session end for audit trail",
        "blocking": false,
        "sdks": ["*"],
        "timeout": 10000
      }
    ],
    "PrePush": [
      {
        "id": "prepush-go-vet",
        "command": "go vet ./...",
        "description": "Run go vet before push (Go changes only)",
        "blocking": true,
        "sdks": ["*"],
        "timeout": 120000
      },
      {
        "id": "prepush-go-build",
        "command": "go build ./...",
        "description": "Verify Go build succeeds before push",
        "blocking": true,
        "sdks": ["*"],
        "timeout": 300000
      }
    ],
    "PreCommit": [
      {
        "id": "precommit-gofmt",
        "command": "gofmt -l .",
        "description": "Check Go formatting before commit",
        "blocking": false,
        "sdks": ["*"],
        "timeout": 30000
      }
    ],
    "TaskComplete": [
      {
        "id": "task-complete-audit",
        "command": "echo \"[hook] Task completed: ${VE_TASK_ID} â€” ${VE_TASK_TITLE}\"",
        "description": "Audit log for task completion",
        "blocking": false,
        "sdks": ["*"],
        "timeout": 10000
      }
    ]
  }
}
